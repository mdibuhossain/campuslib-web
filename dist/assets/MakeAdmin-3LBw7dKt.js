import{I as h,p as f,j as a,P as j,J as y,K as x,M as b}from"./index-wJGs2Dyv.js";import{u as v}from"./useAuth--PT8AQeI.js";import{T as p}from"./Typography-GrtS7GM0.js";import{C as N}from"./CircularProgress-VWTOl8-H.js";import"./extendSxProp-GDan9hWr.js";const k=()=>{const{user:i,token:e}=v(),t=(s,d)=>{const r=[...s],n=r.findIndex(o=>(o==null?void 0:o._id)===(d==null?void 0:d._id));return r[n]={...r[n],role:r[n].role==="admin"?"regular":"admin"},r},{data:{getUsers:l=[]}={},loading:u}=h(x,{variables:{token:e}}),[c,{loading:g}]=f(b,{update(s,{data:{makeAdmin:d}}){const{getUsers:r}=s.readQuery({query:x,variables:{token:e}});s.writeQuery({query:x,variables:{token:e},data:{getUsers:t(r,d)}})}});return a.jsxs(j,{children:[a.jsx(p,{variant:"h5",sx:{fontWeight:600,textAlign:"center",my:4},children:"MAKE ADMIN"}),a.jsxs("div",{className:"flex flex-col 2xl:w-6/12 xl:w-7/12 lg:w-8/12 md:w-9/12 w-11/12 mx-auto mt-10 mb-10 bg-white p-5 rounded-lg shadow-2xl",children:[g&&a.jsx(y,{}),u?a.jsx("div",{className:" flex justify-center items-center",children:a.jsx(N,{color:"info"})}):l==null?void 0:l.map(s=>a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 m-2",children:[a.jsxs("div",{className:"flex items-center col-span-2",children:[a.jsx("div",{className:"mr-2 w-12 hidden sm:block",children:a.jsx("img",{src:(s==null?void 0:s.photoURL)||"/assets/images/avator.webp",className:"rounded-full w-full",alt:"Avatar"})}),a.jsxs("div",{className:"flex flex-col justify-start w-full",children:[a.jsx("h5",{className:"text-sm font-medium leading-tight mr-2",children:s==null?void 0:s.email}),a.jsxs("p",{className:"text-xs text-gray-500",children:[s==null?void 0:s.displayName," ",i.email===(s==null?void 0:s.email)&&"( me )"," ","(by-",s==null?void 0:s.authType,")"]})]})]}),a.jsx("div",{className:"sm:grid sm:justify-self-end sm:mt-0 mt-1 content-center",children:(s==null?void 0:s.role)==="admin"?a.jsx("button",{onClick:()=>c({variables:{_id:s==null?void 0:s._id,token:e}}),className:"bg-red-600 hover:bg-red-900 rounded-md px-2 py-1 font-semibold text-gray-50 text-xs",children:"Admin"}):a.jsx("button",{onClick:()=>c({variables:{_id:s==null?void 0:s._id,token:e}}),className:"bg-green-500 hover:bg-green-600 rounded-md px-2 py-1 font-semibold text-gray-800 hover:text-gray-200 text-xs",children:"Make Admin"})})]},s==null?void 0:s._id))]})]})};export{k as default};
